local args = {
    [1] = game:GetService("Players").LocalPlayer
}
local phaseloop = false
local rushloop = false

game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessedEvent)
    if gameProcessedEvent then
        return 
    end

    -- Key press for K to toggle phaseloop
    if input.KeyCode == Enum.KeyCode.K then
        if phaseloop == false then
            phaseloop = true
            print("enabled")
        elseif phaseloop == true then
            phaseloop = false
            print("disabled")
        end
    end

    -- Key press for J to toggle rushloop
    if input.KeyCode == Enum.KeyCode.J then
        if rushloop == false then
            rushloop = true
            print("enabled")
        elseif rushloop == true then
            rushloop = false
            print("disabled")
        end
    end

    -- Phaseloop logic, fires Phase every 0.5 seconds if enabled
    task.spawn(function()
        while task.wait(0.8) do
            if phaseloop == true then
                game:GetService("Players").LocalPlayer.Character.ReverseFlash.Phase:FireServer(unpack(args))
            end
        end
    end)

    -- Input handling for different keys
    if input.KeyCode == Enum.KeyCode.One then
        local args = {
            [1] = game:GetService("Players").LocalPlayer
        }
        for _ = 1, 3 do
            game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("VibrateArm"):FireServer(unpack(args))
        end
    elseif input.KeyCode == Enum.KeyCode.H then
        game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("FastestMan1"):FireServer()
        wait(0.2)
        game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("FastestMan1"):FireServer()
        wait(0.3)
        game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("FastestMan1"):FireServer()
        wait(1)
        game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("FastestMan1"):FireServer()
    elseif input.KeyCode == Enum.KeyCode.Three then
        local args = {
            [1] = game:GetService("Players").LocalPlayer
        }
        game:GetService("Players").LocalPlayer.Character.ReverseFlash.Phase:FireServer(unpack(args))
    elseif input.KeyCode == Enum.KeyCode.Four then
        local args = {
            [1] = workspace.hejka_lenka10:FindFirstChild("HumanoidRootPart").Position
        }

            game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("Rush"):FireServer(unpack(args))
      
    elseif input.KeyCode == Enum.KeyCode.Five then
        local args = {
            [1] = game:GetService("Players").LocalPlayer
        }
        game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("ReverseFinisher"):FireServer(unpack(args))
    elseif input.KeyCode == Enum.KeyCode.E then
        game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("Sonic"):WaitForChild("Remotes"):WaitForChild("SonicBoom"):FireServer()
    end
end)

-- Rushloop logic, fires Rush every 0.5 seconds if enabled
task.spawn(function()
    while task.wait(0.1) do
        if rushloop == true then
            local args2 = {
                [1] = workspace.hejka_lenka10:FindFirstChild("HumanoidRootPart").Position
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Characters"):WaitForChild("TheFlashCw"):WaitForChild("Remotes"):WaitForChild("Rush"):FireServer(unpack(args2))
        end
    end
end)
