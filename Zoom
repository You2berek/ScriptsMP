local kill = false

    task.spawn(function()
    while true do
    if _G.killAllNCD == true and _G.killAllNCD ~= nil then
    kill = true
    break
    end
    task.wait(1)
    end
    
    end)
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessedEvent)
    if gameProcessedEvent then
        return 
    end
    if kill == true then return end
   local plrs = game:GetService("Players")
local plr = plrs.LocalPlayer
local char = plr.Character
local Humanoid = char:FindFirstChild("Humanoid")
local Animator = Humanoid:FindFirstChild("Animator")
if not char:FindFirstChild("Zoom") then return end
local  scriptVar = char:FindFirstChild("Zoom")
local Anims = scriptVar:FindFirstChild("Animations")
local Repl = game:GetService("ReplicatedStorage")
local Chars = Repl:FindFirstChild("Characters")
local Rems = Chars:FindFirstChild("Zoom"):WaitForChild("Remotes")
local CombatHitbox = Chars.Combat.Fx.CombatHitbox
local HitboxPunch = Chars.Combat.Peacemaker.HitboxPunch
local TweenService = game:GetService("TweenService")
local Mouse = plr:GetMouse()
local MouseHit = Mouse.Hit.Position
function Dash(arg1) 
    local BodyPosition = Instance.new("BodyPosition")
    BodyPosition.MaxForce = Vector3.new(1000000, 1000000, 1000000)
    BodyPosition.P = 50000
    BodyPosition.D = 3000
    BodyPosition.Position = (arg1.CFrame * CFrame.new(0, 0, -10)).Position
    BodyPosition.Parent = arg1
    game.Debris:AddItem(BodyPosition, 0.7)
end

local PunchesAnim = Animator:LoadAnimation(Anims.BarragePunches)
local PunchesAnimBuff = Animator:LoadAnimation(Anims.BarragePunches)
local Grab = Animator:LoadAnimation(Anims.Grab)
local TornadoRun = Animator:LoadAnimation(Anims.TornadoRun)
local StartRunA = Animator:LoadAnimation(Anims.StartRun)
local RunA =  Animator:LoadAnimation(Anims.SuperSpeed)
local RunAExe =  Animator:LoadAnimation(Anims.SuperSpeedExe)

PunchesAnim:GetMarkerReachedSignal("Start"):Connect(function()
scriptVar.Move1:FireServer()
end)
PunchesAnim:GetMarkerReachedSignal("Punch"):Connect(function()
local hb = CombatHitbox:Clone()
hb.Parent = char
local wd = Instance.new("Weld", hb)
wd.Part0 = char.HumanoidRootPart
wd.Part1 = hb
wd.C0 = CFrame.new(0,0,0) * CFrame.Angles(0,0,0)
game.Debris:AddItem(hb, .2)
hb.Touched:Connect(function(p)
local P1 = p.Parent
local hmn = P1:FindFirstChild("Humanoid")
if hmn and hmn.Health ~= 0 then
hb:Destroy()
scriptVar.Move1Hit:FireServer()
for i=1,3 do
game.ReplicatedStorage.Characters.Combat.Remotes.Combo:FireServer(P1)
end
end
end)
end)

PunchesAnimBuff:GetMarkerReachedSignal("Start"):Connect(function()
scriptVar.Move1:FireServer()
end)
PunchesAnimBuff:GetMarkerReachedSignal("Punch"):Connect(function()
local hb = CombatHitbox:Clone()
hb.Parent = char
local wd = Instance.new("Weld", hb)
wd.Part0 = char.HumanoidRootPart
wd.Part1 = hb
wd.C0 = CFrame.new(0,0,0) * CFrame.Angles(0,0,0)
game.Debris:AddItem(hb, .2)
hb.Touched:Connect(function(p)
local P1 = p.Parent
local hmn = P1:FindFirstChild("Humanoid")
if hmn and hmn.Health ~= 0 then
hb:Destroy()
scriptVar.Move1Hit:FireServer()
for i=1,5 do
game.ReplicatedStorage.Characters.DarthVader.Remotes.Bash2:FireServer(P1)
game.ReplicatedStorage.Characters.Combat.Remotes.Combo:FireServer(P1)
end
end
end)
end)


local function Move1(buff)
if buff == false then
PunchesAnim:Play()
else
PunchesAnimBuff:Play()
end
end

local function Rush()
Chars.TheFlashCw.Remotes.Rush:FireServer(MouseHit)
end

local function Move4()
Rems.Choke:FireServer()
Grab:Play()
end

local function Velocity9()
for i=1,10 do
Rems.V9:FireServer()
end
end

local function Counter()
scriptVar.DestroyCounter:FireServer()
Rems.Counter:FireServer()
task.spawn(function()
task.wait(.5)
scriptVar.DestroyCounter:FireServer()
task.wait(.5)
scriptVar.DestroyCounter:FireServer()
end)
end

local function Tornado()
TornadoRun:Play()
Chars.TheFlashCw.Remotes.Mirrage:FireServer()
end

local function RunBuff()
StartRunA:Play()
Chars.TheFlashCw.Remotes.FastestMan1:FireServer(plr)
wait(1)
Chars.TheFlashCw.Remotes.FastestMan:FireServer(plr)
if not char:FindFirstChild("Exe") then
RunA:Play()
else
RunAExe:Play()
end
local BodyVel = Instance.new("BodyVelocity")
BodyVel.Parent = char.HumanoidRootPart
BodyVel.P = 5500
BodyVel.MaxForce = Vector3.new(1000000, 0, 1000000)
BodyVel.Velocity = char.HumanoidRootPart.CFrame.lookVector * 235
game.Debris:AddItem(BodyVel, 3)
local Hitbox = CombatHitbox:Clone()
Hitbox.Parent = char
local Weld = Instance.new("Weld", Hitbox)
Weld.Part0 = Hitbox
Weld.Part1 = char.HumanoidRootPart
Weld.C0 = CFrame.new(0, 0, 3.5) * CFrame.Angles(0, 0, 0)
game.Debris:AddItem(Hitbox, 3)
Hitbox.Touched:Connect(function(Dark)
local Parent1 = Dark.Parent
local Humanoid = Parent1:FindFirstChild("Humanoid")
if Humanoid and Humanoid.Health ~= 0 and not Parent1:FindFirstChild("SuperSpeedDmgVal") then
   if Parent1 ~= char then
      local Val = Chars.Values.SuperSpeedDmgVal:Clone()
      Val.Parent = Parent1
      game.Debris:AddItem(Val, .3)
      for i=1,55 do
      Chars.Combat.Remotes.ComboEndRemote:FireServer(Parent1)   
      end
      end
end
end)

local runDuration = 3
local startTime = tick()

while tick() - startTime < runDuration do
    if BodyVel then
        wait(0.1)
        BodyVel.Velocity = char.HumanoidRootPart.CFrame.LookVector * 235
    end
end
end

local function Run()
StartRunA:Play()
Chars.TheFlashCw.Remotes.FastestMan1:FireServer(plr)
wait(1)
Chars.TheFlashCw.Remotes.FastestMan:FireServer(plr)
if not char:FindFirstChild("Exe") then
RunA:Play()
else
RunAExe:Play()
end
local BodyVel = Instance.new("BodyVelocity")
BodyVel.Parent = char.HumanoidRootPart
BodyVel.P = 5500
BodyVel.MaxForce = Vector3.new(1000000, 0, 1000000)
BodyVel.Velocity = char.HumanoidRootPart.CFrame.lookVector * 100
game.Debris:AddItem(BodyVel, 3)
local Hitbox = CombatHitbox:Clone()
Hitbox.Parent = char
local Weld = Instance.new("Weld", Hitbox)
Weld.Part0 = Hitbox
Weld.Part1 = char.HumanoidRootPart
Weld.C0 = CFrame.new(0, 0, 3.5) * CFrame.Angles(0, 0, 0)
game.Debris:AddItem(Hitbox, 3)
Hitbox.Touched:Connect(function(Dark)
local Parent1 = Dark.Parent
local Humanoid = Parent1:FindFirstChild("Humanoid")
if Humanoid and Humanoid.Health ~= 0 and not Parent1:FindFirstChild("SuperSpeedDmgVal") then
   if Parent1 ~= char then
      local Val = Chars.Values.SuperSpeedDmgVal:Clone()
      Val.Parent = Parent1
      game.Debris:AddItem(Val, .3)
      for i=1,2 do
      Chars.Combat.Remotes.ComboEndRemote:FireServer(Parent1)   
      end
      end
end
end)

local runDuration = 3
local startTime = tick()

while tick() - startTime < runDuration do
    if BodyVel then
        wait(0.1)
        BodyVel.Velocity = char.HumanoidRootPart.CFrame.LookVector * 100
    end
end
end



    if input.KeyCode == Enum.KeyCode.One then
Move1(false)
elseif input.KeyCode == Enum.KeyCode.Two then
Run()
elseif input.KeyCode == Enum.KeyCode.Three then
Counter()
elseif input.KeyCode == Enum.KeyCode.Four then
Move4()
elseif input.KeyCode == Enum.KeyCode.Five then
Rems.Finisher:FireServer()
elseif input.KeyCode == Enum.KeyCode.E then
Velocity9()
elseif input.KeyCode == Enum.KeyCode.R then
Move1(true)
elseif input.KeyCode == Enum.KeyCode.T then
Rush()
elseif input.KeyCode == Enum.KeyCode.G then
RunBuff()
elseif input.KeyCode == Enum.KeyCode.H then
Tornado()
   end
end)
