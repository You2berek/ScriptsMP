local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local character = workspace:WaitForChild("NoahMin3rMoon_3b88bb")
local humanoid = character:WaitForChild("Humanoid")
local animator = humanoid:WaitForChild("Animator")

local animations = character.Eren.Animations
local move1Anim = animator:LoadAnimation(animations.Grab)
local move2Anim = animator:LoadAnimation(animations.MoveTwoB)
local move4Anim = animator:LoadAnimation(animations.MoveFour)

local erenRemotes = ReplicatedStorage:WaitForChild("Characters"):WaitForChild("Eren"):WaitForChild("Remotes")

-- Tween helper
local function tweenCameraFOV(targetFOV, duration, easingStyle, easingDirection)
    local tweenInfo = TweenInfo.new(duration, easingStyle, easingDirection)
    local tween = TweenService:Create(Camera, tweenInfo, {FieldOfView = targetFOV})
    tween:Play()
end

UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if gameProcessedEvent then return end

    if input.KeyCode == Enum.KeyCode.One then
        erenRemotes:WaitForChild("MoveOne"):FireServer()
        move1Anim:Play()

    elseif input.KeyCode == Enum.KeyCode.Two then
        erenRemotes:WaitForChild("MoveTwo"):FireServer()
        task.wait(1.5)

        if character:FindFirstChild("LandedOne") then
            move2Anim:Play()
            erenRemotes:WaitForChild("MoveOneP2"):FireServer()

            tweenCameraFOV(60, 0.3, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
            task.wait(0.3)
            tweenCameraFOV(85, 0.15, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
            task.wait(0.2)
            tweenCameraFOV(70, 0.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
        end

    elseif input.KeyCode == Enum.KeyCode.Three then
        if character:FindFirstChild("Eren") then
            character.Eren:FindFirstChild("DestroyCounter"):FireServer()
        end
        erenRemotes:WaitForChild("MoveThree"):FireServer()

    elseif input.KeyCode == Enum.KeyCode.Four then
        if character:FindFirstChild("Eren") then
            character.Eren:FindFirstChild("Charge"):FireServer()
        end

    elseif input.KeyCode == Enum.KeyCode.Five then
        erenRemotes:WaitForChild("Finisher"):FireServer()

    elseif input.KeyCode == Enum.KeyCode.E then
        erenRemotes:WaitForChild("MoveE"):FireServer()
    end
end)
